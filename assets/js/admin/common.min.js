$(document).ready(function(){$(".btn-remove").click(function(){var c=$(this).data("controller");var e=$(this).data("id");var d=HOSTNAME+"admin/"+c+"/remove";if(confirm("Chắc chắn xóa?")){$.ajax({method:"post",url:d,data:{id:e,csrf_diamondtour_token:csrf_hash},success:function(f){if(f.status==200){csrf_hash=f.reponse.csrf_hash;$(".remove_"+e).fadeOut()}},error:function(g,f){console.log(errorHandle(g,f))}})}});function a(e,d,f){e+="";x=e.split(d);x1=x[0];x2=x.length>1?"."+x[1]:"";var c=/(\d+)(\d{3})/;while(c.test(x1)){x1=x1.replace(c,"$1"+f+"$2")}return x1+x2}$("#price_shared").on("input",function(c){$(this).val(b(this.value.replace(/[,VNĐ]/g,"")))}).on("keypress",function(c){if(!$.isNumeric(String.fromCharCode(c.which))){c.preventDefault()}}).on("paste",function(d){var c=d.originalEvent.clipboardData||window.clipboardData;if(!$.isNumeric(c.getData("text"))){d.preventDefault()}});function b(d){var e=d.split("").reverse().join("");var c=e.replace(/\d\d\d(?!$)/g,"$&,");return c.split("").reverse().join("")}});var numberdates=$("#content-full-date .title-content-date.date").length;function removeDate(){numberdate=$(".title-content-date.date").length;$($("#content-full-date .title-content-date.date")[numberdate-1]).parents(".no_border").prev().css("display","none");$($("#content-full-date .title-content-date.date")[numberdate-1]).removeClass("date").addClass("rm");$($("#content-full-date .title-content-date.rm")).css("display","none");$(".title-content-date.showdate .btn-margin span.remove").remove();if(numberdate>=3){$($(".title-content-date.showdate .btn-margin")[numberdate-2]).append("<span class='col-xs-1 remove' style='float:right;padding:0px;' onclick='removeDate();'><i class='glyphicon glyphicon-remove'></i></span>")}$("#numberdate").val($("#content-full-date .title-content-date.date").length)}var csrf_hash=$("input[name='csrf_diamondtour_token']").val();function remove(a,c){var b=HOSTNAMEADMIN+"/"+a+"/remove";if(confirm("Chắc chắn xóa?")){$.ajax({method:"post",url:b,data:{id:c,csrf_diamondtour_token:csrf_hash},success:function(d){csrf_hash=d.reponse.csrf_hash;if(d.status==200&&d.isExisted==true){console.log(d);console.log(d.message);if(d.message!="undefined"){alert(d.message)}$(".remove_"+c).fadeOut()}if(d.status==200&&d.isExisted==false){alert("Danh mục này có chứa bài viết. Vui lòng xóa bài viết trước sau đó thực hiện lại thao tác")}},error:function(e,d){console.log(errorHandle(e,d));if(e.status==404&&e.responseJSON.message!="undefined"){alert(e.responseJSON.message);location.reload()}}})}}function remove_image(a,e,d,c){var b=HOSTNAMEADMIN+"/"+a+"/remove_image";if(confirm("Chắc chắn xóa ảnh này?")){$.ajax({method:"post",url:b,data:{id:e,csrf_diamondtour_token:csrf_hash,image:d},success:function(f){if(f.status==200){csrf_hash=f.reponse.csrf_hash;$(".row_"+c).fadeOut();$("input[name='csrf_diamondtour_token']").val(csrf_hash)}},error:function(g,f){console.log(errorHandle(g,f))}})}}function active_image(a,e,d,c){var b=HOSTNAMEADMIN+"/"+a+"/active_image";if(confirm("Chắc chắn chọn ảnh này làm anh đại diện?")){$.ajax({method:"post",url:b,data:{id:e,csrf_diamondtour_token:csrf_hash,image:d},success:function(f){if(f.status==200){csrf_hash=f.reponse.csrf_hash;$(".row_"+c).fadeOut();$("input[name='csrf_diamondtour_token']").val(csrf_hash)}},error:function(g,f){location.reload()}})}}function active(a,d,b){var c=HOSTNAMEADMIN+"/"+a+"/active";if(confirm(b)){$.ajax({method:"post",url:c,data:{id:d,csrf_diamondtour_token:csrf_hash},success:function(e){csrf_hash=e.reponse.csrf_hash;if(e.status==200){switch(a){case"post_category":alert("Bật danh mục thành công");break;case"banner":alert("Bật banner thành công");break;case"product":alert("Bật tour thành công");break;case"post":alert("Bật bài viết thành công");break;case"product_category":alert("Bật danh mục thành công");break}location.reload()}console.log(e)},error:function(f,e){if(f.status==404&&f.responseJSON.message!="undefined "){alert(f.responseJSON.message);location.reload()}else{console.log(errorHandle(f,e))}}})}}function deactive(a,d,b){var c=HOSTNAMEADMIN+"/"+a+"/deactive";if(confirm(b)){$.ajax({method:"post",url:c,data:{id:d,csrf_diamondtour_token:csrf_hash},success:function(e){csrf_hash=e.reponse.csrf_hash;if(e.status==200){switch(a){case"post_category":alert("Tắt danh mục thành công");break;case"banner":alert("Tắt banner thành công");break;case"product":alert("Tắt tour thành công");break;case"post":alert("Tắt bài viết thành công");break;case"product_category":alert(e.message);break}location.reload()}},error:function(f,e){if(f.status==404&&f.responseJSON.message!="undefined "){alert(f.responseJSON.message);location.reload()}else{console.log(errorHandle(f,e))}}})}}function errorHandle(b,a){if(b.status===0){return("Not connected.\nPlease verify your network connection.")}else{if(b.status==404){return("The requested page not found.")}else{if(b.status==401){return("Sorry!! You session has expired. Please login to continue access.")}else{if(b.status==500){return("Internal Server Error.")}else{if(a==="parsererror"){return("Requested JSON parse failed.")}else{if(a==="timeout"){return("Time out error.")}else{if(a==="abort"){return("Ajax request aborted.")}}}}}}}return("Unknown error occurred. Please try again.")}$(".select2").select2();$(document).off("change","[id^=paren-go-place_]").on("change","[id^=paren-go-place_]",function(){var b=$($(this)[0])[0].dataset.idlocaltion;var a=HOSTNAMEADMIN+"/product/ajax_area_selected";$.ajax({method:"post",url:a,data:{area:$($(this)[0]).val(),csrf_diamondtour_token:csrf_hash},success:function(c){console.log(c);csrf_hash=c.reponse.csrf_hash;if(c.status==200&&c.isExisted==true){$("input[name='csrf_diamondtour_token']").val(csrf_hash);$("#go-place_"+b).html(c.reponse.content)}},error:function(d,c){console.log(errorHandle(d,c));location.reload()}})});